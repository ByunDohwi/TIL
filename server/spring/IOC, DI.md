# IOC

### Inversion of Control - 제어의 역전

제어의 역전이란, 객체의 생성 및 관리 책임을 개발자가 제어하는 것이 아니라, 외부의 프레임 워크나 라이브러리가 제어하는 것을 말한다.

### IOC의 구현 방법

- Factory Pettern
    - 객체 생성을 전담하는 팩토리 클래스를 두어 객체를 생성하는 방식, 팩토리 클래스를 사용하여 객체를 생성하면 객체 생성에 대한 책임이 팩토리 클래스로 이전되므로 IoC가 구현된다.
- Template Method Pattern
    - 객체 생성 과정을 추상화하여, 하위 클래스에서 구체적인 구현을 담당하는 방식 하위 클래스에서 구현하는 부분에 대한 제어의 역전이 이루어져 IoC가 구현된다.
- Service Locator Pattern
    - 객체 생성 및 관리를 위한 서비스 위치자 패턴
    - 서비스 로케이터 클래스는 객체 생성 및 관리에 대한 책임을 가지며 클라이언트는 서비스 로케이터를 통해 필요한 객체를 가져오게 된다.
    - 서비스 로케이터 클래스가 객체의 생성과 관리를 담당하므로 제어의 역전이 이루어져 IoC가 구현된다.
- Dependency Injection(DI)
    - 객체 생성 및 관리에 대한 책임을 IoC컨테이너가 가지고, 필요한 객체를 직접 생성하거나 외부에서 주입받는 방식
    - DI는 생성자 주입, 속성 주입, 메소드 주입 등 다양한 방식으로 이루어진다.

# DI

### Dependency injection - 의존성 주입

DI는 외부에서 객체 간의 관계(의존성)을 결정해준다. 즉, 객체를 직접 생성하는 것이 아니라 외부에서 생성 후 주입시켜 주는 방식을 말한다.

이를 통해 객체 간의 관계를 동적으로 주입해 유연성을 확보하고 결합도를 낮출 수 있다.

### Spring 에서의 DI 방법

- Construct Injection
    - 가장 권장되는 의존 관계 주입 방식이다.
    - 오직 생성자 주입만 final 키워드 사용이 가능하고, 생성자를 통해 주입된다.  final 키워드를 사용하기 때문에 인스턴스가 생성될 때 한 번만 할당된다.
    - 객체의 불변성이 보장되고 NPE(Null Pointer Exception)이 발생하지 않는다.
- Field Injection
    - Bean으로 등록된 객체를 사용하고자 하는 클래스에 Field로 선언한 뒤 @Auowired를 붙이면 자동으로 의존 관계가 주입된다.
    - 참조관계를 눈으로 확인하기 어렵고, 순환참조를 막을 수 없다.
    - 생성자 주입을 뺀 나머지(필드 주입, Setter주입)은 모두 생성자 이후에 호출 되므로, 필드에 final 키워드를 사용할 수 없다. → 불변성이 보장되지 않는다.
    - 단일 책임 원칙을 위반한다.
- Setter Injection
    - @Autowired 어노테이션을 사용해 Setter 메서드를 통해 주입하는 방법이다.
    - NPE가 발생할 수 있다.
    - 필드에 final 키워드를 사용할 수 없다.